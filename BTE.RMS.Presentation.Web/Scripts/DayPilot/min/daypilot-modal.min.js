/*
DayPilot Lite
Copyright (c) 2005 - 2015 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 176-lite
*/
if(typeof(DayPilot)==='undefined'){DayPilot={};};(function(){DayPilot.ModalStatic={};DayPilot.ModalStatic.list=[];DayPilot.ModalStatic.hide=function(){if(this.list.length>0){var $a=this.list.pop();if($a){$a.hide();}}};DayPilot.ModalStatic.remove=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){$c.splice(i,1);return;}}};DayPilot.ModalStatic.close=function($d){DayPilot.ModalStatic.result($d);DayPilot.ModalStatic.hide();};DayPilot.ModalStatic.result=function(r){var $c=DayPilot.ModalStatic.list;if($c.length>0){$c[$c.length-1].result=r;}};DayPilot.ModalStatic.displayed=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){return true;}};return false;};var $e=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!==-1);DayPilot.Modal=function($f){this.autoStretch=true;this.autoStretchFirstLoadOnly=false;this.border="10px solid #ccc";this.corners='Rounded';this.className=null;this.dragDrop=true;this.height=200;this.maxHeight=null;this.opacity=30;this.scrollWithPage=true;this.top=20;this.useIframe=true;this.width=500;this.zIndex=null;this.closed=null;this.onClosed=null;var $g=this;this.id='_'+new Date().getTime()+'n'+(Math.random()*10);this.registered=false;this.start=null;this.coords=null;this.showHtml=function($h){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};if(!this.div){this.create();};this.update();if(this.useIframe){var $i=function(p,$j){return function(){p.setInnerHTML(p.id+"iframe",$j);};};window.setTimeout($i(this,$h),0);}else{this.div.innerHTML=$h;};this.update();this.register();};this.rounded=function(){return this.corners&&this.corners.toLowerCase()==='rounded';};this.showUrl=function($k){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};this.useIframe=true;if(!this.div){this.create();};this.re(this.iframe,"load",this.onIframeLoad);this.iframe.src=$k;this.update();this.register();};this.update=function(){var $l=window;var $m=document;var scrollY=$l.pageYOffset?$l.pageYOffset:(($m.documentElement&&$m.documentElement.scrollTop)?$m.documentElement.scrollTop:$m.body.scrollTop);var $n=function(){return $g.windowRect().y;};this.hideDiv.style.filter="alpha(opacity="+this.opacity+")";this.hideDiv.style.opacity="0."+this.opacity;this.hideDiv.style.backgroundColor="black";if(this.zIndex){this.hideDiv.style.zIndex=this.zIndex;};this.hideDiv.style.display='';window.setTimeout(function(){$g.hideDiv.onclick=function(){$g.hide();};},500);this.div.className=this.className;this.div.style.border=this.border;if(this.rounded()){this.div.style.MozBorderRadius="5px";this.div.style.webkitBorderRadius="5px";this.div.style.borderRadius="5px";};this.div.style.marginLeft='-'+Math.floor(this.width/2)+"px";this.div.style.position='absolute';this.div.style.top=(scrollY+this.top)+'px';this.div.style.width=this.width+'px';if(this.zIndex){this.div.style.zIndex=this.zIndex;};if(this.height){this.div.style.height=this.height+'px';};if(this.useIframe&&this.height){this.iframe.style.height=(this.height)+'px';};this.div.style.display='';DayPilot.ModalStatic.list.push(this);};this.onIframeLoad=function(){$g.iframe.contentWindow.modal=$g;if($g.autoStretch){$g.stretch();}};this.stretch=function(){var $n=function(){return $g.windowRect().y;};var $o=function(){return $g.windowRect().x;};var $p=$o()-40;for(var w=this.width;w<$p&&this.hasHorizontalScrollbar();w+=10){this.div.style.width=w+'px';this.div.style.marginLeft='-'+Math.floor(w/2)+"px";};var $q=this.maxHeight||$n()-2*this.top;for(var h=this.height;h<$q&&this.hasVerticalScrollbar();h+=10){this.iframe.style.height=(h)+'px';this.div.style.height=h+'px';};if(this.autoStretchFirstLoadOnly){this.ue(this.iframe,"load",this.onIframeLoad);}};this.hasHorizontalScrollbar=function(){var document=this.iframe.contentWindow.document;var $r=document.compatMode==='BackCompat'?document.body:document.documentElement;var $s=$r.scrollWidth;var $t=document.body.children;for(var i=0;i<$t.length;i++){var $u=$t[i].offsetLeft+$t[i].offsetWidth;$s=Math.max($s,$u);};var $v=$s>$r.clientWidth;return $v;};this.hasVerticalScrollbar=function(){var document=this.iframe.contentWindow.document;var $r=document.compatMode==='BackCompat'?document.body:document.documentElement;var $w=$r.scrollHeight;var $t=document.body.children;for(var i=0;i<$t.length;i++){var $u=$t[i].offsetTop+$t[i].offsetHeight;$w=Math.max($w,$u);};var $x=$w>$r.clientHeight;return $x;};this.windowRect=function(){var $m=document;if($m.compatMode==="CSS1Compat"&&$m.documentElement&&$m.documentElement.clientWidth){var x=$m.documentElement.clientWidth;var y=$m.documentElement.clientHeight;return{x:x,y:y};}else{var x=$m.body.clientWidth;var y=$m.body.clientHeight;return{x:x,y:y};}};this.register=function(){if(this.registered){return;};this.re(window,'resize',this.resize);this.re(window,'scroll',this.resize);if(this.dragDrop){this.re(document,'mousemove',this.drag);this.re(document,'mouseup',this.drop);};this.registered=true;};this.drag=function(e){if(!$g.coords){return;};var e=e||window.event;var $y=$g.mc(e);var x=$y.x-$g.coords.x;var y=$y.y-$g.coords.y;$g.div.style.marginLeft='0px';$g.div.style.top=($g.start.y+y)+"px";$g.div.style.left=($g.start.x+x)+"px";};this.drop=function(e){if(!$g.coords){return;};$g.unmaskIframe();$g.coords=null;};this.maskIframe=function(){if(!this.useIframe){return;};var $z=80;var $A=document.createElement("div");$A.style.backgroundColor="#ffffff";$A.style.filter="alpha(opacity="+$z+")";$A.style.opacity="0."+$z;$A.style.width="100%";$A.style.height=this.height+"px";$A.style.position="absolute";$A.style.left='0px';$A.style.top='0px';this.div.appendChild($A);this.mask=$A;};this.unmaskIframe=function(){if(!this.useIframe){return;};this.div.removeChild(this.mask);this.mask=null;};this.resize=function(){if(!$g.hideDiv){return;};if(!$g.div){return;};if($g.hideDiv.style.display==='none'){return;};if($g.div.style.display==='none'){return;};var scrollY=window.pageYOffset?window.pageYOffset:((document.documentElement&&document.documentElement.scrollTop)?document.documentElement.scrollTop:document.body.scrollTop);if(!$g.scrollWithPage){$g.div.style.top=(scrollY+$g.top)+'px';}};this.re=function(el,ev,$B){if(el.addEventListener){el.addEventListener(ev,$B,false);}else if(el.attachEvent){el.attachEvent("on"+ev,$B);}};this.ue=function(el,ev,$B){if(el.removeEventListener){el.removeEventListener(ev,$B,false);}else if(el.detachEvent){el.detachEvent("on"+ev,$B);}};this.mc=function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY};};return{x:ev.clientX+document.documentElement.scrollLeft,y:ev.clientY+document.documentElement.scrollTop};};this.abs=function(element){var r={x:element.offsetLeft,y:element.offsetTop};while(element.offsetParent){element=element.offsetParent;r.x+=element.offsetLeft;r.y+=element.offsetTop;};return r;};this.create=function(){var $C=document.createElement("div");$C.id=this.id+"hide";$C.style.position='fixed';$C.style.left="0px";$C.style.top="0px";$C.style.right="0px";$C.style.bottom="0px";$C.style.backgroundColor="black";$C.style.opacity=0.50;$C.oncontextmenu=function(){return false;};document.body.appendChild($C);var $D=document.createElement("div");$D.id=this.id+'popup';$D.style.position='fixed';$D.style.left='50%';$D.style.top='0px';$D.style.backgroundColor='white';$D.style.width="50px";$D.style.height="50px";if(this.dragDrop){$D.onmousedown=this.dragStart;};var $E=50;var $F=null;if(this.useIframe){$F=document.createElement("iframe");$F.id=this.id+"iframe";$F.name=this.id+"iframe";$F.frameBorder='0';$F.style.width='100%';$F.style.height=$E+'px';$D.appendChild($F);};document.body.appendChild($D);this.div=$D;this.iframe=$F;this.hideDiv=$C;};this.dragStart=function(e){$g.maskIframe();$g.coords=$g.mc(e||window.event);$g.start={x:$g.div.offsetLeft,y:$g.div.offsetTop};};this.setInnerHTML=function(id,$j){var $G=window.frames[id];var $m=$G.contentWindow||$G.document||$G.contentDocument;if($m.document){$m=$m.document;};$m.body.innerHTML=$j;};this.close=function($d){this.result=$d;this.hide();};this.hide=function(){if(this.div){this.div.style.display='none';this.hideDiv.style.display='none';if(!this.useIframe){this.div.innerHTML=null;}};DayPilot.ModalStatic.remove(this);if(this.onClosed){var $H={};$H.result=this.result;this.onClosed($H);}else if(this.closed){this.closed();}};this.$I=function(){if(!$f){return;};for(var name in $f){this[name]=$f[name];}};this.$I();};DayPilot.Modal.close=function($d){if(parent&&parent.DayPilot&&parent.DayPilot.ModalStatic){parent.DayPilot.ModalStatic.close($d);}else{throw "Unable to close DayPilot.Modal dialog.";}};})();


