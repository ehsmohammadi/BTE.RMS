/*
DayPilot Lite
Copyright (c) 2005 - 2015 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 176-lite
*/
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilot.Global==='undefined'){DayPilot.Global={};};(function(){var $a=function(){};if(typeof DayPilot.Calendar!=='undefined'){return;};function loadDefaultCss(){if(DayPilot.Global.defaultCalendarCss){return;};var $b=DayPilot.sheet();$b.add(".calendar_default_main","border: 1px solid #999;font-family: Tahoma, Arial, sans-serif; font-size: 12px;");$b.add(".calendar_default_main *, .calendar_default_main *:before, .calendar_default_main *:after","box-sizing: content-box;");$b.add(".calendar_default_rowheader_inner,.calendar_default_cornerright_inner,.calendar_default_corner_inner,.calendar_default_colheader_inner,.calendar_default_alldayheader_inner","color: #666;background: #eee;");$b.add(".calendar_default_cornerright_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;	border-bottom: 1px solid #999;");$b.add(".calendar_default_rowheader_inner","font-size: 16pt;text-align: right; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_corner_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_rowheader_minutes","font-size:10px;vertical-align: super;padding-left: 2px;padding-right: 2px;");$b.add(".calendar_default_colheader_inner","text-align: center; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_cell_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #ddd;border-bottom: 1px solid #ddd; background: #f9f9f9;");$b.add(".calendar_default_cell_business .calendar_default_cell_inner","background: #fff");$b.add(".calendar_default_alldayheader_inner","text-align: center;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_message","opacity: 0.9;filter: alpha(opacity=90);	padding: 10px; color: #ffffff;background: #ffa216;");$b.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'color: #666; border: 1px solid #999;');$b.add(".calendar_default_event_bar","top: 0px;bottom: 0px;left: 0px;width: 4px;background-color: #9dc8e8;");$b.add(".calendar_default_event_bar_inner","position: absolute;width: 4px;background-color: #1066a8;");$b.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'background: #fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");');$b.add(".calendar_default_selected .calendar_default_event_inner","background: #ddd;");$b.add(".calendar_default_alldayevent_inner","position: absolute;top: 2px;bottom: 2px;left: 2px;right: 2px;padding: 2px;margin-right: 1px;font-size: 12px;");$b.add(".calendar_default_event_withheader .calendar_default_event_inner","padding-top: 15px;");$b.add(".calendar_default_event","cursor: default;");$b.add(".calendar_default_event_inner","position: absolute;overflow: hidden;top: 0px;bottom: 0px;left: 0px;right: 0px;padding: 2px 2px 2px 6px;font-size: 12px;");$b.add(".calendar_default_shadow_inner","background-color: #666666;	opacity: 0.5;filter: alpha(opacity=50);height: 100%;");$b.commit();DayPilot.Global.defaultCalendarCss=true;};var DayPilotCalendar={};DayPilotCalendar.selectedCells=[];DayPilotCalendar.topSelectedCell=null;DayPilotCalendar.bottomSelectedCell=null;DayPilotCalendar.selecting=false;DayPilotCalendar.column=null;DayPilotCalendar.firstSelected=null;DayPilotCalendar.firstMousePos=null;DayPilotCalendar.originalMouse=null;DayPilotCalendar.originalHeight=null;DayPilotCalendar.originalTop=null;DayPilotCalendar.resizing=null;DayPilotCalendar.globalHandlers=false;DayPilotCalendar.moving=null;DayPilotCalendar.register=function($c){if(!DayPilotCalendar.registered){DayPilotCalendar.registered=[];};var r=DayPilotCalendar.registered;for(var i=0;i<r.length;i++){if(r[i]===$c){return;}};r.push($c);};DayPilotCalendar.unregister=function($c){var a=DayPilotCalendar.registered;if(!a){return;};var i=DayPilot.indexOf(a,$c);if(i===-1){return;};a.splice(i,1);};DayPilotCalendar.getCellsAbove=function($d){var $e=[];var c=DayPilotCalendar.getColumn($d);var tr=$d.parentNode;var $f=null;while(tr&&$f!==DayPilotCalendar.firstSelected){$f=tr.getElementsByTagName("td")[c];$e.push($f);tr=tr.previousSibling;while(tr&&tr.tagName!=="TR"){tr=tr.previousSibling;}};return $e;};DayPilotCalendar.getCellsBelow=function($d){var $e=[];var c=DayPilotCalendar.getColumn($d);var tr=$d.parentNode;var $f=null;while(tr&&$f!==DayPilotCalendar.firstSelected){$f=tr.getElementsByTagName("td")[c];$e.push($f);tr=tr.nextSibling;while(tr&&tr.tagName!=="TR"){tr=tr.nextSibling;}};return $e;};DayPilotCalendar.getColumn=function($d){var i=0;while($d.previousSibling){$d=$d.previousSibling;if($d.tagName==="TD"){i++;}};return i;};DayPilotCalendar.gUnload=function(ev){if(!DayPilotCalendar.registered){return;};var r=DayPilotCalendar.registered;for(var i=0;i<r.length;i++){var c=r[i];c.dispose();DayPilotCalendar.unregister(c);}};DayPilotCalendar.gMouseUp=function(e){if(DayPilotCalendar.resizing){if(!DayPilotCalendar.resizingShadow){DayPilotCalendar.resizing.style.cursor='default';document.body.style.cursor='default';DayPilotCalendar.resizing=null;return;};var $g=DayPilotCalendar.resizing.event;var $h=DayPilotCalendar.resizingShadow.clientHeight+4;var top=DayPilotCalendar.resizingShadow.offsetTop;var $i=DayPilotCalendar.resizing.dpBorder;DayPilotCalendar.deleteShadow(DayPilotCalendar.resizingShadow);DayPilotCalendar.resizingShadow=null;DayPilotCalendar.resizing.style.cursor='default';$g.calendar.nav.top.style.cursor='auto';DayPilotCalendar.resizing.onclick=null;DayPilotCalendar.resizing=null;$g.calendar.eventResizeDispatch($g,$h,top,$i);}else if(DayPilotCalendar.moving){if(!DayPilotCalendar.movingShadow){DayPilotCalendar.moving=null;document.body.style.cursor='default';return;};var top=DayPilotCalendar.movingShadow.offsetTop;DayPilotCalendar.deleteShadow(DayPilotCalendar.movingShadow);var $g=DayPilotCalendar.moving.event;var $j=DayPilotCalendar.movingShadow.column;DayPilotCalendar.moving=null;DayPilotCalendar.movingShadow=null;$g.calendar.nav.top.style.cursor='auto';var ev=e||window.event;$g.calendar.eventMoveDispatch($g,$j,top,ev);}else if(DayPilotCalendar.selecting&&DayPilotCalendar.topSelectedCell!==null){var $c=DayPilotCalendar.selecting.calendar;DayPilotCalendar.selecting=false;var $k=$c.getSelection();$c.timeRangeSelectedDispatch($k.start,$k.end);if($c.timeRangeSelectedHandling!=="Hold"&&$c.timeRangeSelectedHandling!=="HoldForever"){$a();}}else{DayPilotCalendar.selecting=false;}};DayPilotCalendar.deleteShadow=function($l){if(!$l){return;};if(!$l.parentNode){return;};$l.parentNode.removeChild($l);};DayPilotCalendar.moveShadow=function($m){var $l=DayPilotCalendar.movingShadow;var parent=$l.parentNode;parent.style.display='none';$l.parentNode.removeChild($l);$m.firstChild.appendChild($l);$l.style.left='0px';parent.style.display='';$l.style.width=(DayPilotCalendar.movingShadow.parentNode.offsetWidth+1)+'px';};DayPilotCalendar.Calendar=function(id){var $n=false;if(this instanceof DayPilotCalendar.Calendar&&!this.$1D){$n=true;this.$1D=true;};if(!$n){throw "DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'";};var $c=this;this.uniqueID=null;this.v='176-lite';this.id=id;this.clientName=id;this.cache={};this.cache.pixels={};this.elements={};this.elements.events=[];this.nav={};this.afterRender=function(){};this.fasterDispose=true;this.angularAutoApply=true;this.api=2;this.borderColor="#CED2CE";this.businessBeginsHour=9;this.businessEndsHour=18;this.cellBackColor="#ffffff";this.cellBorderColor="#DEDFDE";this.cellHeight=20;this.columnMarginRight=5;this.cornerBackColor="#F3F3F9";this.cssOnly=true;this.days=1;this.durationBarVisible=true;this.eventBackColor='#638EDE';this.eventBorderColor="#2951A5";this.eventFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.eventFontSize='8pt';this.eventFontColor="#ffffff";this.eventHeaderFontSize='8pt';this.eventHeaderFontColor="#ffffff";this.eventHeaderHeight=14;this.eventHeaderVisible=true;this.headerFontSize='10pt';this.headerFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.headerFontColor="#42658C";this.headerHeight=20;this.height=300;this.heightSpec='BusinessHours';this.hideUntilInit=true;this.hourHalfBorderColor="#EBEDEB";this.hourBorderColor="#DEDFDE";this.hourFontColor="#42658C";this.hourFontFamily="Tahoma, Arial, Helvetica, sans-serif";this.hourFontSize="16pt";this.hourNameBackColor="#F3F3F9";this.hourNameBorderColor="#DEDFDE";this.hourWidth=45;this.initScrollPos='Auto';this.loadingLabelText="Loading...";this.loadingLabelVisible=true;this.loadingLabelBackColor="ff0000";this.loadingLabelFontColor="#ffffff";this.loadingLabelFontFamily="Tahoma, Arial, Helvetica, sans-serif";this.loadingLabelFontSize="10pt";this.locale="en-us";this.selectedColor="#316AC5";this.showToolTip=true;this.startDate=new DayPilot.Date().getDatePart();this.cssClassPrefix="calendar_default";this.theme=null;this.timeFormat='Clock12Hours';this.visible=true;this.timeRangeSelectedHandling='Enabled';this.eventClickHandling='Enabled';this.eventResizeHandling='Update';this.eventMoveHandling='Update';this.onEventClick=null;this.onEventClicked=null;this.onEventMove=null;this.onEventMoved=null;this.onEventResize=null;this.onEventResized=null;this.onTimeRangeSelect=null;this.onTimeRangeSelected=null;this.clearSelection=function(){for(var j=0;j<DayPilotCalendar.selectedCells.length;j++){var $d=DayPilotCalendar.selectedCells[j];if($d){if($d.selected){$d.removeChild($d.selected);$d.firstChild.style.display='';$d.selected=null;}}}};this.ie=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!==-1);this.ff=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!==-1);this.opera105=(function(){if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var v=new Number(RegExp.$1);return v>=10.5;};return false;})();this.webkit522=(function(){if(/AppleWebKit[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var v=new Number(RegExp.$1);return v>=522;};return false;})();this.cleanSelection=this.clearSelection;this.callBack2=function($o,$p,$q){if(this.callbackTimeout){window.clearTimeout(this.callbackTimeout);};this.callbackTimeout=window.setTimeout(function(){$c.loadingStart();},100);var $r={};$r.action=$o;$r.parameters=$q;$r.data=$p;$r.header=this.getCallBackHeader();var $s="JSON"+DayPilot.JSON.stringify($r);if(this.backendUrl){DayPilot.request(this.backendUrl,this.callBackResponse,$s,this.ajaxError);}else if(typeof WebForm_DoCallback==='function'){WebForm_DoCallback(this.uniqueID,$s,this.updateView,this.clientName,this.onCallbackError,true);}};this.onCallbackError=function($t,$u){alert("Error!\r\nResult: "+$t+"\r\nContext:"+$u);};this.dispose=function(){var c=$c;c.deleteEvents();c.nav.zoom.onmousemove=null;c.nav.scroll.root=null;DayPilot.pu(c.nav.loading);c.disposeMain();c.disposeHeader();c.nav.select=null;c.nav.cornerRight=null;c.nav.scrollable=null;c.nav.zoom=null;c.nav.loading=null;c.nav.header=null;c.nav.hourTable=null;c.nav.scrolltop=null;c.nav.scroll=null;c.nav.main=null;c.nav.message=null;c.nav.messageClose=null;c.nav.top=null;DayPilotCalendar.unregister(c);};this.registerDispose=function(){this.nav.top.dispose=this.dispose;};this.callBackResponse=function($v){$c.updateView($v.responseText);};this.getCallBackHeader=function(){var h={};h.control="dpc";h.id=this.id;h.v=this.v;h.days=$c.days;h.startDate=$c.startDate;h.heightSpec=$c.heightSpec;h.businessBeginsHour=$c.businessBeginsHour;h.businessEndsHour=$c.businessEndsHour;h.hashes=$c.hashes;h.backColor=$c.cellBackColor;h.timeFormat=$c.timeFormat;h.viewType=$c.viewType;h.locale=$c.locale;return h;};this.createShadow=function($w,$x){var $y=$w.parentNode;while($y&&$y.tagName!=="TD"){$y=$y.parentNode;};var $l=document.createElement('div');$l.setAttribute('unselectable','on');$l.style.position='absolute';$l.style.width=($w.offsetWidth-4)+'px';$l.style.height=($w.offsetHeight-4)+'px';$l.style.left=($w.offsetLeft)+'px';$l.style.top=($w.offsetTop)+'px';$l.style.border='2px dotted #666666';$l.style.zIndex=101;$l.style.backgroundColor="#aaaaaa";$l.style.opacity=0.5;$l.style.filter="alpha(opacity=50)";$l.style.border='2px solid #aaaaaa';if($x&&false){$l.style.overflow='hidden';$l.style.fontSize=$w.style.fontSize;$l.style.fontFamily=$w.style.fontFamily;$l.style.color=$w.style.color;$l.innerHTML=$w.data.client.html();};$y.firstChild.appendChild($l);return $l;};this.$1E={};this.$1E.locale=function(){var $z=DayPilot.Locale.find($c.locale);if(!$z){return DayPilot.Locale.US;};return $z;};var $A=this.$1E;this.updateView=function($t,$u){if($t&&$t.indexOf("$$$")===0){if(window.console){console.log("Error received from the server side: "+$t);}else{throw "Error received from the server side: "+$t;};return;};var $t=eval("("+$t+")");if($t.CallBackRedirect){document.location.href=$t.CallBackRedirect;return;};if($t.UpdateType==="None"){$c.loadingStop();$c.$1F();return;};$c.deleteEvents();if($t.UpdateType==="Full"){$c.columns=$t.Columns;$c.days=$t.Days;$c.startDate=new DayPilot.Date($t.StartDate);$c.heightSpec=$t.HeightSpec?$t.HeightSpec:$c.heightSpec;$c.businessBeginsHour=$t.BusinessBeginsHour?$t.BusinessBeginsHour:$c.businessBeginsHour;$c.businessEndsHour=$t.BusinessEndsHour?$t.BusinessEndsHour:$c.businessEndsHour;$c.headerDateFormat=$t.HeaderDateFormat?$t.HeaderDateFormat:$c.headerDateFormat;$c.viewType=$t.ViewType;$c.backColor=$t.BackColor?$t.BackColor:$c.backColor;$c.eventHeaderVisible=$t.EventHeaderVisible?$t.EventHeaderVisible:$c.eventHeaderVisible;$c.timeFormat=$t.TimeFormat?$t.TimeFormat:$c.timeFormat;$c.locale=$t.Locale?$t.Locale:$c.locale;$c.prepareColumns();};$c.events.list=$t.Events;$c.loadEvents();$c.updateHeaderHeight();if($t.UpdateType==="Full"){$c.drawHeader();$c.drawMain();$c.drawHourTable();$c.updateHeight();};$c.$1F();$c.drawEvents();$c.clearSelection();$c.afterRender($t.CallBackData,true);$c.loadingStop();};this.durationHours=function(){return 24;};this.businessHoursSpan=function(){if(this.businessBeginsHour>this.businessEndsHour){return 24-this.businessBeginsHour+this.businessEndsHour;}else{return this.businessEndsHour-this.businessBeginsHour;}};this.rowCount=function(){return 48;};this.$1G=function(){return $c.api===2;};this.eventClickCallBack=function(e,$p){this.callBack2('EventClick',$p,e);};this.eventClickDispatch=function(e){var $B=this;var e=$B.event;if($c.$1G()){var $C={};$C.e=e;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventClick==='function'){$c.$1H.apply(function(){$c.onEventClick($C);});if($C.preventDefault.value){return;}};switch($c.eventClickHandling){case 'CallBack':$c.eventClickCallBack(e);break;};if(typeof $c.onEventClicked==='function'){$c.$1H.apply(function(){$c.onEventClicked($C);});}}else{switch($c.eventClickHandling){case 'CallBack':$c.eventClickCallBack(e);break;case 'JavaScript':$c.onEventClick(e);break;}}};this.eventResizeCallBack=function(e,$D,$E,$p){if(!$D)throw 'newStart is null';if(!$E)throw 'newEnd is null';var $F={};$F.e=e;$F.newStart=$D;$F.newEnd=$E;this.callBack2('EventResize',$p,$F);};this.eventResizeDispatch=function(e,$G,$H,$i){var $I=1;var $D=new Date();var $E=new Date();var $J=e.start();var end=e.end();if($i==='top'){var $K=$J.getDatePart();var $L=Math.floor(($H-$I)/$c.cellHeight);var $M=$L*30;var ts=$M*60*1000;$D=$K.addTime(ts);$E=e.end();}else if($i==='bottom'){var $K=end.getDatePart();var $L=Math.floor(($H+$G-$I)/$c.cellHeight);var $M=$L*30;var ts=$M*60*1000;$D=$J;$E=$K.addTime(ts);};if($c.$1G()){var $C={};$C.e=e;$C.newStart=$D;$C.newEnd=$E;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventResize==='function'){$c.$1H.apply(function(){$c.onEventResize($C);});if($C.preventDefault.value){return;}};switch($c.eventResizeHandling){case 'CallBack':$c.eventResizeCallBack(e,$D,$E);break;case 'Update':e.start($D);e.end($E);$c.events.update(e);break;};if(typeof $c.onEventResized==='function'){$c.$1H.apply(function(){$c.onEventResized($C);});}}else{switch($c.eventResizeHandling){case 'CallBack':$c.eventResizeCallBack(e,$D,$E);break;case 'JavaScript':$c.onEventResize(e,$D,$E);break;}}};this.eventMoveCallBack=function(e,$D,$E,$N,$p){if(!$D)throw 'newStart is null';if(!$E)throw 'newEnd is null';var $F={};$F.e=e;$F.newStart=$D;$F.newEnd=$E;this.callBack2('EventMove',$p,$F);};this.eventMoveDispatch=function(e,$j,$H,ev){var $I=1;var $L=Math.floor(($H-$I)/$c.cellHeight);var $O=$L*30*60*1000;var $J=e.start();var end=e.end();var $K=new Date();if($J.isDayPilotDate){$J=$J.d;};$K.setTime(Date.UTC($J.getUTCFullYear(),$J.getUTCMonth(),$J.getUTCDate()));var $P=$J.getTime()-($K.getTime()+$J.getUTCHours()*3600*1000+Math.floor($J.getUTCMinutes()/30)*30*60*1000);var length=end.getTime()-$J.getTime();var $Q=this.columns[$j];var $R=$Q.Start.getTime();var $S=new Date();$S.setTime($R+$O+$P);var $D=new DayPilot.Date($S);var $E=$D.addTime(length);if($c.$1G()){var $C={};$C.e=e;$C.newStart=$D;$C.newEnd=$E;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventMove==='function'){$c.$1H.apply(function(){$c.onEventMove($C);});if($C.preventDefault.value){return;}};switch($c.eventMoveHandling){case 'CallBack':$c.eventMoveCallBack(e,$D,$E,$Q.Value);break;case 'Update':e.start($D);e.end($E);$c.events.update(e);break;};if(typeof $c.onEventMoved==='function'){$c.$1H.apply(function(){$c.onEventMoved($C);});}}else{switch($c.eventMoveHandling){case 'CallBack':$c.eventMoveCallBack(e,$D,$E,$Q.Value);break;case 'JavaScript':$c.onEventMove(e,$D,$E,$Q.Value,false);break;}}};this.timeRangeSelectedCallBack=function($J,end,$T,$p){var $U={};$U.start=$J;$U.end=end;this.callBack2('TimeRangeSelected',$p,$U);};this.timeRangeSelectedDispatch=function($J,end){$J=new DayPilot.Date($J);end=new DayPilot.Date(end);if(this.$1G()){var $C={};$C.start=$J;$C.end=end;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onTimeRangeSelect==='function'){$c.$1H.apply(function(){$c.onTimeRangeSelect($C);});if($C.preventDefault.value){return;}};switch($c.timeRangeSelectedHandling){case 'CallBack':$c.timeRangeSelectedCallBack($J,end);break;};if(typeof $c.onTimeRangeSelected==='function'){$c.$1H.apply(function(){$c.onTimeRangeSelected($C);});}}else{switch($c.timeRangeSelectedHandling){case 'CallBack':$c.timeRangeSelectedCallBack($J,end);break;case 'JavaScript':$c.onTimeRangeSelected($J,end);break;}}};this.onCellMousedown=function(ev){if(DayPilotCalendar.selecting){return;};if($c.timeRangeSelectedHandling==="Disabled"){return;};var $V=(window.event)?window.event.button:ev.which;if($V!==1&&$V!==0){return;};DayPilotCalendar.firstMousePos=DayPilot.mc(ev||window.event);DayPilotCalendar.selecting={};DayPilotCalendar.selecting.calendar=$c;if(DayPilotCalendar.selectedCells){$c.clearSelection();DayPilotCalendar.selectedCells=[];};DayPilotCalendar.column=DayPilotCalendar.getColumn(this);DayPilotCalendar.selectedCells.push(this);DayPilotCalendar.firstSelected=this;DayPilotCalendar.topSelectedCell=this;DayPilotCalendar.bottomSelectedCell=this;$c.activateSelection();return false;};this.activateSelection=function(){var $W=this.getSelection();for(var j=0;j<DayPilotCalendar.selectedCells.length;j++){var $d=DayPilotCalendar.selectedCells[j];if($d&&!$d.selected){var $X=document.createElement("div");$X.style.height=($c.cellHeight-1)+"px";$X.style.backgroundColor=$c.selectedColor;$d.firstChild.style.display="none";$d.insertBefore($X,$d.firstChild);$d.selected=$X;}}};this.mousemove=function(ev){if(typeof(DayPilotCalendar)==='undefined'){return;};if(!DayPilotCalendar.selecting){return;};var $Y=DayPilot.mc(ev||window.event);var $Z=DayPilotCalendar.getColumn(this);if($Z!==DayPilotCalendar.column){return;};$c.clearSelection();if($Y.y<DayPilotCalendar.firstMousePos.y){DayPilotCalendar.selectedCells=DayPilotCalendar.getCellsBelow(this);DayPilotCalendar.topSelectedCell=DayPilotCalendar.selectedCells[0];DayPilotCalendar.bottomSelectedCell=DayPilotCalendar.firstSelected;}else{DayPilotCalendar.selectedCells=DayPilotCalendar.getCellsAbove(this);DayPilotCalendar.topSelectedCell=DayPilotCalendar.firstSelected;DayPilotCalendar.bottomSelectedCell=DayPilotCalendar.selectedCells[0];};$c.activateSelection();};this.getSelection=function(){var $J=DayPilotCalendar.topSelectedCell.start;var end=DayPilotCalendar.bottomSelectedCell.end;return new DayPilot.Selection($J,end,null,$c);};this.mouseup=function(ev){};this.prepareColumns=function(){this.columns=this.$1I();for(var i=0;i<this.columns.length;i++){this.activateColumn(this.columns[i]);}};this.activateColumn=function($m){$m.Start=new DayPilot.Date($m.Start);$m.putIntoBlock=function(ep){for(var i=0;i<this.blocks.length;i++){var $00=this.blocks[i];if($00.overlapsWith(ep.part.top,ep.part.height)){$00.events.push(ep);$00.min=Math.min($00.min,ep.part.top);$00.max=Math.max($00.max,ep.part.top+ep.part.height);return i;}};var $00=[];$00.lines=[];$00.events=[];$00.overlapsWith=function($J,$01){var end=$J+$01-1;if(!(end<this.min||$J>this.max-1)){return true;};return false;};$00.putIntoLine=function(ep){var $02=this;for(var i=0;i<this.lines.length;i++){var $03=this.lines[i];if($03.isFree(ep.part.top,ep.part.height)){$03.push(ep);return i;}};var $03=[];$03.isFree=function($J,$01){var end=$J+$01-1;var $04=this.length;for(var i=0;i<$04;i++){var e=this[i];if(!(end<e.part.top||$J>e.part.top+e.part.height-1)){return false;}};return true;};$03.push(ep);this.lines.push($03);return this.lines.length-1;};$00.events.push(ep);$00.min=ep.part.top;$00.max=ep.part.top+ep.part.height;this.blocks.push($00);return this.blocks.length-1;};$m.putIntoLine=function(ep){var $02=this;for(var i=0;i<this.lines.length;i++){var $03=this.lines[i];if($03.isFree(ep.part.top,ep.part.height)){$03.push(ep);return i;}};var $03=[];$03.isFree=function($J,$01){var end=$J+$01-1;var $04=this.length;for(var i=0;i<$04;i++){var e=this[i];if(!(end<e.part.top||$J>e.part.top+e.part.height-1)){return false;}};return true;};$03.push(ep);this.lines.push($03);return this.lines.length-1;};};this.$1I=function(){var $05=[];var $J=this.startDate.getDatePart();var $06=this.days;switch(this.viewType){case "Day":$06=1;break;case "Week":$06=7;$J=$J.firstDayOfWeek($A.locale().weekStarts);break;case "WorkWeek":$06=5;$J=$J.firstDayOfWeek(1);break;};for(var i=0;i<$06;i++){var $07=$c.headerDateFormat?$c.headerDateFormat:$A.locale().datePattern;var $m={};$m.Start=$J.addDays(i);$m.Name=$m.Start.toString($07);$m.InnerHTML=$m.Name;$05.push($m);};return $05;};this.visibleStart=function(){return this.columns[0].Start;};this.visibleEnd=function(){var $04=this.columns.length-1;return this.columns[$04].Start.addDays(1);};this.$1J=function($08){var $09=this.theme||this.cssClassPrefix;if($09){return $09+$08;}else{return "";}};this.deleteEvents=function(){if(this.elements.events){for(var i=0;i<this.elements.events.length;i++){var $X=this.elements.events[i];var $w=$X.event;if($w){$w.calendar=null;};$X.onclick=null;$X.onclickSave=null;$X.onmouseover=null;$X.onmouseout=null;$X.onmousemove=null;$X.onmousedown=null;if($X.firstChild&&$X.firstChild.firstChild&&$X.firstChild.firstChild.tagName&&$X.firstChild.firstChild.tagName.toUpperCase()==='IMG'){var $0a=$X.firstChild.firstChild;$0a.onmousedown=null;$0a.onmousemove=null;$0a.onclick=null;};$X.helper=null;$X.data=null;$X.event=null;DayPilot.de($X);}};this.elements.events=[];};this.$1K=function(e){var $0b=this.nav.events;var $0c=true;var $0d=true;var $0e=false;var $0f=this.eventBorderColor;var $X=document.createElement("div");$X.style.position='absolute';$X.style.left=e.part.left+'%';$X.style.top=(e.part.top)+'px';$X.style.width=e.part.width+'%';$X.style.height=Math.max(e.part.height,2)+'px';$X.style.overflow='hidden';$X.data=e;$X.event=e;$X.unselectable='on';$X.style.MozUserSelect='none';$X.style.KhtmlUserSelect='none';$X.className=this.$1J("_event");if(e.data.cssClass){DayPilot.Util.addClass($X,e.data.cssClass);};$X.isFirst=e.part.start.getTime()===e.start().getTime();$X.isLast=e.part.end.getTime()===e.end().getTime();$X.onclick=this.eventClickDispatch;$X.onmousemove=function(ev){var $0g=5;var $0h=$c.eventHeaderVisible?($c.eventHeaderHeight):10;if(typeof(DayPilotCalendar)==='undefined'){return;};var $0i=DayPilot.mo3($X,ev);if(!$0i){return;};if(DayPilotCalendar.resizing||DayPilotCalendar.moving){return;};var $0j=this.isLast;if($0i.y<=$0h&&$c.eventResizeHandling!=='Disabled'){this.style.cursor="n-resize";this.dpBorder='top';}else if(this.offsetHeight-$0i.y<=$0g&&$c.eventResizeHandling!=='Disabled'){if($0j){this.style.cursor="s-resize";this.dpBorder='bottom';}else{this.style.cursor='not-allowed';}}else if(!DayPilotCalendar.resizing&&!DayPilotCalendar.moving){if($c.eventClickHandling!=='Disabled'){this.style.cursor='pointer';}else{this.style.cursor='default';}}};$X.onmousedown=function(ev){ev=ev||window.event;var $V=ev.which||ev.button;if((this.style.cursor==='n-resize'||this.style.cursor==='s-resize')&&$V===1){DayPilotCalendar.resizing=this;DayPilotCalendar.originalMouse=DayPilot.mc(ev);DayPilotCalendar.originalHeight=this.offsetHeight;DayPilotCalendar.originalTop=this.offsetTop;$c.nav.top.style.cursor=this.style.cursor;}else if($V===1&&$c.eventMoveHandling!=='Disabled'){DayPilotCalendar.moving=this;DayPilotCalendar.moving.event=this.event;var $0k=DayPilotCalendar.moving.helper={};$0k.oldColumn=$c.columns[this.data.part.dayIndex].Value;DayPilotCalendar.originalMouse=DayPilot.mc(ev);DayPilotCalendar.originalTop=this.offsetTop;var $0i=DayPilot.mo3(this,ev);if($0i){DayPilotCalendar.moveOffsetY=$0i.y;}else{DayPilotCalendar.moveOffsetY=0;};$c.nav.top.style.cursor='move';};return false;};var $0l=document.createElement("div");$0l.setAttribute("unselectable","on");$0l.className=$c.$1J("_event_inner");$0l.innerHTML=e.client.html();if(e.data.backColor){$0l.style.background=e.data.backColor;if(DayPilot.browser.ie9||DayPilot.browser.ielt9){$0l.style.filter='';}};$X.appendChild($0l);if(e.client.barVisible()){var $h=e.part.height-2;var $0m=100*e.part.barTop/$h;var $0n=Math.ceil(100*e.part.barHeight/$h);var $0o=document.createElement("div");$0o.setAttribute("unselectable","on");$0o.className=this.$1J("_event_bar");$0o.style.position="absolute";if(e.data.barBackColor){$0o.style.backgroundColor=e.data.barBackColor;};var $0p=document.createElement("div");$0p.setAttribute("unselectable","on");$0p.className=this.$1J("_event_bar_inner");$0p.style.top=$0m+"%";if(0<$0n&&$0n<=1){$0p.style.height="1px";}else{$0p.style.height=$0n+"%";};if(e.data.barColor){$0p.style.backgroundColor=e.data.barColor;};$0o.appendChild($0p);$X.appendChild($0o);};if($0b.rows[0].cells[e.part.dayIndex]){var $0q=$0b.rows[0].cells[e.part.dayIndex].firstChild;$0q.appendChild($X);$c.makeChildrenUnselectable($X);};$c.elements.events.push($X);};this.makeChildrenUnselectable=function(el){var c=(el&&el.childNodes)?el.childNodes.length:0;for(var i=0;i<c;i++){try{var $0r=el.childNodes[i];if($0r.nodeType===1){$0r.unselectable='on';this.makeChildrenUnselectable($0r);}}catch(e){}}};this.drawEvents=function(){for(var i=0;i<this.columns.length;i++){var $0s=this.columns[i];if(!$0s.blocks){continue;};for(var m=0;m<$0s.blocks.length;m++){var $00=$0s.blocks[m];for(var j=0;j<$00.lines.length;j++){var $03=$00.lines[j];for(var k=0;k<$03.length;k++){var e=$03[k];e.part.width=100/$00.lines.length;e.part.left=e.part.width*j;var $0t=(j===$00.lines.length-1);if(!$0t){e.part.width=e.part.width*1.5;};this.$1K(e);}}}}};this.drawTop=function(){this.nav.top.innerHTML='';if(this.cssOnly){DayPilot.Util.addClass(this.nav.top,this.$1J("_main"));}else{this.nav.top.style.lineHeight="1.2";this.nav.top.style.textAlign="left";};this.nav.top.style.MozUserSelect='none';this.nav.top.style.KhtmlUserSelect='none';this.nav.top.style.position='relative';this.nav.top.style.width=this.width?this.width:'100%';if(this.hideUntilInit){this.nav.top.style.visibility='hidden';};if(!this.visible){this.nav.top.style.display="none";};this.nav.scroll=document.createElement("div");this.nav.scroll.style.height=this.getScrollableHeight()+"px";if(this.heightSpec==='BusinessHours'){this.nav.scroll.style.overflow="auto";}else{this.nav.scroll.style.overflow="hidden";};this.nav.scroll.style.position="relative";if(!this.cssOnly){this.nav.scroll.style.border="1px solid "+this.borderColor;this.nav.scroll.style.backgroundColor=this.hourNameBackColor;};var $0u=this.drawTopHeaderDiv();this.nav.top.appendChild($0u);this.nav.scroll.style.zoom=1;var $0v=this.drawScrollable();this.nav.scrollable=$0v.firstChild;this.nav.scroll.appendChild($0v);this.nav.top.appendChild(this.nav.scroll);this.nav.scrollLayer=document.createElement("div");this.nav.scrollLayer.style.position='absolute';this.nav.scrollLayer.style.top='0px';this.nav.scrollLayer.style.left='0px';this.nav.top.appendChild(this.nav.scrollLayer);this.nav.loading=document.createElement("div");this.nav.loading.style.position='absolute';this.nav.loading.style.top='0px';this.nav.loading.style.left=(this.hourWidth+5)+"px";this.nav.loading.style.backgroundColor=this.loadingLabelBackColor;this.nav.loading.style.fontSize=this.loadingLabelFontSize;this.nav.loading.style.fontFamily=this.loadingLabelFontFamily;this.nav.loading.style.color=this.loadingLabelFontColor;this.nav.loading.style.padding='2px';this.nav.loading.innerHTML=this.loadingLabelText;this.nav.loading.style.display='none';this.nav.top.appendChild(this.nav.loading);};this.drawHourTable=function(){if(!this.fasterDispose)DayPilot.pu(this.nav.hourTable);this.nav.scrollable.rows[0].cells[0].innerHTML='';this.nav.hourTable=this.createHourTable();this.nav.scrollable.rows[0].cells[0].appendChild(this.nav.hourTable);};this.drawScrollable=function(){var $0w=document.createElement("div");$0w.style.zoom=1;$0w.style.position='relative';var $0x=document.createElement("table");$0x.cellSpacing="0";$0x.cellPadding="0";$0x.border="0";$0x.style.border="0px none";$0x.style.width="100%";$0x.style.position='absolute';var r=$0x.insertRow(-1);var c;c=r.insertCell(-1);c.valign="top";c.style.padding='0px';c.style.border='0px none';this.nav.hourTable=this.createHourTable();c.appendChild(this.nav.hourTable);c=r.insertCell(-1);c.valign="top";c.width="100%";c.style.padding='0px';c.style.border='0px none';if(!this.cssOnly){c.appendChild(this.createEventsAndCells());}else{var $0v=document.createElement("div");$0v.style.position="relative";c.appendChild($0v);$0v.appendChild(this.createEventsAndCells());$0v.appendChild(this.$1L());};$0w.appendChild($0x);this.nav.zoom=$0w;return $0w;};this.createEventsAndCells=function(){var $0x=document.createElement("table");$0x.cellPadding="0";$0x.cellSpacing="0";$0x.border="0";$0x.style.width="100%";$0x.style.border="0px none";$0x.style.tableLayout='fixed';if(!this.cssOnly){$0x.style.borderLeft="1px solid "+this.borderColor;};this.nav.main=$0x;this.nav.events=$0x;return $0x;};this.$1L=function(){var $0x=document.createElement("table");$0x.style.top="0px";$0x.cellPadding="0";$0x.cellSpacing="0";$0x.border="0";$0x.style.position="absolute";$0x.style.width="100%";$0x.style.border="0px none";$0x.style.tableLayout='fixed';this.nav.events=$0x;var $0y=true;var $05=this.columns;var cl=$05.length;var r=($0y)?$0x.insertRow(-1):$0x.rows[0];for(var j=0;j<cl;j++){var c=($0y)?r.insertCell(-1):r.cells[j];if($0y){c.style.padding='0px';c.style.border='0px none';c.style.height='0px';c.style.overflow='visible';if(!$c.rtl){c.style.textAlign='left';};var $X=document.createElement("div");$X.style.marginRight=$c.columnMarginRight+"px";$X.style.position='relative';$X.style.height='1px';if(!this.cssOnly){$X.style.fontSize='1px';$X.style.lineHeight='1.2';};$X.style.marginTop='-1px';c.appendChild($X);}};return $0x;};this.createHourTable=function(){var $0x=document.createElement("table");$0x.cellSpacing="0";$0x.cellPadding="0";$0x.border="0";$0x.style.border='0px none';$0x.style.width=this.hourWidth+"px";$0x.oncontextmenu=function(){return false;};var $0z=this.cssOnly?0:1;if($0z){var r=$0x.insertRow(-1);r.style.height="1px";r.style.backgroundColor="white";var c=r.insertCell(-1);c.style.padding='0px';c.style.border='0px none';};var $0A=24;for(var i=0;i<$0A;i++){this.createHourRow($0x,i);};return $0x;};this.createHourRow=function($0x,i){var $h=(this.cellHeight*2);var r=$0x.insertRow(-1);r.style.height=$h+"px";var c=r.insertCell(-1);c.valign="bottom";c.unselectable="on";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;};c.style.cursor="default";c.style.padding='0px';c.style.border='0px none';var $0B=document.createElement("div");$0B.style.position="relative";if(this.cssOnly){$0B.className=this.$1J("_rowheader");};$0B.style.width=this.hourWidth+"px";$0B.style.height=($h)+"px";$0B.style.overflow='hidden';$0B.unselectable='on';var $00=document.createElement("div");if(this.cssOnly){$00.className=this.$1J("_rowheader_inner");}else{$00.style.borderBottom="1px solid "+this.hourNameBorderColor;$00.style.textAlign="right";};$00.style.height=($h-1)+"px";$00.unselectable="on";var $0C=document.createElement("div");if(!this.cssOnly){$0C.style.padding="2px";$0C.style.fontFamily=this.hourFontFamily;$0C.style.fontSize=this.hourFontSize;$0C.style.color=this.hourFontColor;};$0C.unselectable="on";var $J=this.startDate.addHours(i);var $0D=$J.getHours();var am=$0D<12;if(this.timeFormat==="Clock12Hours"){$0D=$0D%12;if($0D===0){$0D=12;}};$0C.innerHTML=$0D;var $0E=document.createElement("span");$0E.unselectable="on";if(!this.cssOnly){$0E.style.fontSize="10px";$0E.style.verticalAlign="super";}else{$0E.className=this.$1J("_rowheader_minutes");};var $0F;if(this.timeFormat==="Clock12Hours"){if(am){$0F="AM";}else{$0F="PM";}}else{$0F="00";};if(!this.cssOnly){$0E.innerHTML="&nbsp;"+$0F;}else{$0E.innerHTML=$0F;};$0C.appendChild($0E);$00.appendChild($0C);$0B.appendChild($00);c.appendChild($0B);};this.getScrollableHeight=function(){switch(this.heightSpec){case "Full":return(24*2*this.cellHeight);case "BusinessHours":var $0G=this.businessHoursSpan();return $0G*this.cellHeight*2;case "BusinessHoursNoScroll":var $0G=this.businessHoursSpan();return $0G*this.cellHeight*2;default:throw "DayPilot.Calendar: Unexpected 'heightSpec' value.";}};this.drawTopHeaderDiv=function(){var $0u=document.createElement("div");if(!this.cssOnly){$0u.style.borderLeft="1px solid "+this.borderColor;$0u.style.borderRight="1px solid "+this.borderColor;};$0u.style.overflow="auto";var $0x=document.createElement("table");$0x.cellPadding="0";$0x.cellSpacing="0";$0x.border="0";$0x.style.width="100%";$0x.style.borderCollapse='separate';$0x.style.border="0px none";var r=$0x.insertRow(-1);var c=r.insertCell(-1);c.style.padding='0px';c.style.border='0px none';var $0H=this.drawCorner();c.appendChild($0H);this.nav.corner=$0H;c=r.insertCell(-1);c.style.width="100%";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;};c.valign="top";c.style.position='relative';c.style.padding='0px';c.style.border='0px none';this.nav.header=document.createElement("table");this.nav.header.cellPadding="0";this.nav.header.cellSpacing="0";this.nav.header.border="0";this.nav.header.width="100%";this.nav.header.style.tableLayout="fixed";if(!this.cssOnly){this.nav.header.style.borderBottom="0px none #000000";this.nav.header.style.borderRight="0px none #000000";this.nav.header.style.borderLeft="1px solid "+this.borderColor;this.nav.header.style.borderTop="1px solid "+this.borderColor;};this.nav.header.oncontextmenu=function(){return false;};var $0I=this.nav.scroll.style.overflow!=='hidden';if(!this.cssOnly){if($0I){this.nav.header.style.borderRight="1px solid "+this.borderColor;}};c.appendChild(this.nav.header);if($0I){c=r.insertCell(-1);c.unselectable="on";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;c.style.borderTop="1px solid "+this.borderColor;c.style.borderBottom="0px none";c.style.borderLeft="0px none";c.style.borderRight="0px none";c.style.padding='0px';c.style.verticalAlign='top';c.innerHTML="&nbsp;";};var $0J=document.createElement("div");$0J.unselectable="on";$0J.style.position="relative";$0J.style.width="16px";if(!this.cssOnly){$0J.style.lineHeight="1px";$0J.style.fontSize="1px";$0J.style.height="1px";}else{$0J.style.height=this.headerHeight+"px";$0J.className=this.$1J("_cornerright");var $0l=document.createElement("div");$0l.className=this.$1J('_cornerright_inner');$0J.appendChild($0l);};c.appendChild($0J);this.nav.cornerRight=$0J;};$0u.appendChild($0x);return $0u;};this.drawCorner=function(){var $0v=document.createElement("div");$0v.style.position='relative';if(this.cssOnly){$0v.className=this.$1J("_corner");}else{$0v.style.backgroundColor=this.hourNameBackColor;$0v.style.fontFamily=this.headerFontFamily;$0v.style.fontSize=this.headerFontSize;$0v.style.color=this.headerFontColor;$0v.style.borderTop="1px solid "+this.borderColor;};$0v.style.width=this.hourWidth+"px";$0v.style.height=this.headerHeight+"px";$0v.oncontextmenu=function(){return false;};var $0H=document.createElement("div");$0H.unselectable="on";if(this.cssOnly){$0H.className=this.$1J("_corner_inner");};$0v.appendChild($0H);return $0v;};this.disposeMain=function(){var $0x=this.nav.main;$0x.root=null;$0x.onmouseup=null;for(var y=0;y<$0x.rows.length;y++){var r=$0x.rows[y];for(var x=0;x<r.cells.length;x++){var c=r.cells[x];c.root=null;c.onmousedown=null;c.onmousemove=null;c.onmouseout=null;c.onmouseup=null;}};if(!this.fasterDispose)DayPilot.pu($0x);};this.drawMain=function(){var $0K=[];var $0L=[];var $0x=this.nav.main;var $L=30*60*1000;var $0M=this.rowCount();var $05=$c.columns;var $0y=!this.tableCreated||$05.length!==$0x.rows[0].cells.length||$0M!==$0x.rows.length;if($0x){this.disposeMain();}while($0x&&$0x.rows&&$0x.rows.length>0&&$0y){if(!this.fasterDispose){DayPilot.pu($0x.rows[0]);};$0x.deleteRow(0);};this.tableCreated=true;var cl=$05.length;if(this.cssOnly){var $0N=this.nav.events;while($0N&&$0N.rows&&$0N.rows.length>0&&$0y){if(!this.fasterDispose){DayPilot.pu($0N.rows[0]);};$0N.deleteRow(0);};var cl=$05.length;var r=($0y)?$0N.insertRow(-1):$0N.rows[0];for(var j=0;j<cl;j++){var c=($0y)?r.insertCell(-1):r.cells[j];if($0y){c.style.padding='0px';c.style.border='0px none';c.style.height='0px';c.style.overflow='visible';if(!$c.rtl){c.style.textAlign='left';};var $X=document.createElement("div");$X.style.marginRight=$c.columnMarginRight+"px";$X.style.position='relative';$X.style.height='1px';if(!this.cssOnly){$X.style.fontSize='1px';$X.style.lineHeight='1.2';};$X.style.marginTop='-1px';c.appendChild($X);}}};if(!this.cssOnly){var r=($0y)?$0x.insertRow(-1):$0x.rows[0];if($0y){r.style.backgroundColor='white';};for(var j=0;j<cl;j++){var c=($0y)?r.insertCell(-1):r.cells[j];if($0y){c.style.padding='0px';c.style.border='0px none';c.style.height='1px';c.style.overflow='visible';c.style.width=(100.0/$05.length)+"%";var $X=document.createElement("div");$X.style.display='block';$X.style.marginRight=$c.columnMarginRight+"px";$X.style.position='relative';$X.style.height='1px';$X.style.fontSize='1px';$X.style.lineHeight='1.2';$X.style.marginTop='-1px';c.appendChild($X);}}};for(var i=0;i<$0M;i++){var $0z=this.cssOnly?0:1;var r=($0y)?$0x.insertRow(-1):$0x.rows[i+$0z];if($0y){r.style.MozUserSelect='none';r.style.KhtmlUserSelect='none';};for(var j=0;j<cl;j++){var $0s=this.columns[j];var c=($0y)?r.insertCell(-1):r.cells[j];c.start=$0s.Start.addTime(i*$L);c.end=c.start.addTime($L);c.onmousedown=this.onCellMousedown;c.onmousemove=this.mousemove;c.onmouseup=function(){return false;};c.onclick=function(){return false;};if($0y){c.root=this;c.style.padding='0px';c.style.border='0px none';c.style.verticalAlign='top';if(!this.cssOnly){if(j!==cl-1){c.style.borderRight='1px solid '+$c.cellBorderColor;}};c.style.height=$c.cellHeight+'px';c.style.overflow='hidden';c.unselectable='on';if(!this.cssOnly){var $X=document.createElement("div");$X.unselectable='on';$X.style.fontSize='1px';$X.style.height='0px';var $0O=(c.end.getMinutes()+c.end.getSeconds()+c.end.getMilliseconds())>0;if($0O){if($c.hourHalfBorderColor!==''){$X.style.borderBottom='1px solid '+$c.hourHalfBorderColor;}}else{if($c.hourBorderColor!==''){$X.style.borderBottom='1px solid '+$c.hourBorderColor;}};var $0P=document.createElement("div");$0P.style.height=($c.cellHeight-1)+"px";$0P.style.overflow='hidden';$0P.unselectable='on';c.appendChild($0P);}else{var $X=document.createElement("div");$X.unselectable='on';$X.style.height=$c.cellHeight+"px";$X.style.position="relative";$X.className=this.$1J("_cell");var $0Q=this.$1M(c.start,c.end);if($0Q&&this.cssOnly){DayPilot.Util.addClass($X,$c.$1J("_cell_business"));};var $0l=document.createElement("div");$0l.setAttribute("unselectable","on");$0l.className=this.$1J("_cell_inner");$X.appendChild($0l);c.appendChild($X);};c.appendChild($X);};c.style.backgroundColor=$c.cellBackColor;$0P=c.firstChild;}};$0x.onmouseup=this.mouseup;$0x.root=this;$c.nav.scrollable.onmousemove=function(ev){ev=ev||window.event;var $0R=$c.nav.scrollable;$c.coords=DayPilot.mo3($0R,ev);var $Y=DayPilot.mc(ev);if(DayPilotCalendar.resizing){if(!DayPilotCalendar.resizingShadow){DayPilotCalendar.resizingShadow=$c.createShadow(DayPilotCalendar.resizing,false,$c.shadow);};var $0S=$c.cellHeight;var $I=1;var $0T=($Y.y-DayPilotCalendar.originalMouse.y);if(DayPilotCalendar.resizing.dpBorder==='bottom'){var $0U=Math.floor(((DayPilotCalendar.originalHeight+DayPilotCalendar.originalTop+$0T)+$0S/ 2)/ $0S)*$0S-DayPilotCalendar.originalTop+$I;if($0U<$0S)$0U=$0S;var $04=$c.nav.main.clientHeight;if(DayPilotCalendar.originalTop+$0U>$04)$0U=$04-DayPilotCalendar.originalTop;DayPilotCalendar.resizingShadow.style.height=($0U-4)+'px';}else if(DayPilotCalendar.resizing.dpBorder==='top'){var $0V=Math.floor(((DayPilotCalendar.originalTop+$0T-$I)+$0S/ 2)/ $0S)*$0S+$I;if($0V<$I){$0V=$I;};if($0V>DayPilotCalendar.originalTop+DayPilotCalendar.originalHeight-$0S){$0V=DayPilotCalendar.originalTop+DayPilotCalendar.originalHeight-$0S;};var $0U=DayPilotCalendar.originalHeight-($0V-DayPilotCalendar.originalTop)-4;if($0U<$0S){$0U=$0S;}else{DayPilotCalendar.resizingShadow.style.top=$0V+'px';};DayPilotCalendar.resizingShadow.style.height=($0U)+'px';}}else if(DayPilotCalendar.moving){if(!DayPilotCalendar.movingShadow){DayPilotCalendar.movingShadow=$c.createShadow(DayPilotCalendar.moving,!$c.ie,$c.shadow);DayPilotCalendar.movingShadow.style.width=(DayPilotCalendar.movingShadow.parentNode.offsetWidth+1)+'px';};if(!$c.coords){return;};var $0S=$c.cellHeight;var $I=1;var $0i=DayPilotCalendar.moveOffsetY;if(!$0i){$0i=$0S/2;};var $0V=Math.floor((($c.coords.y-$0i-$I)+$0S/ 2)/ $0S)*$0S+$I;if($0V<$I){$0V=$I;};var $0b=$c.nav.events;var $04=$c.nav.main.clientHeight;var $h=parseInt(DayPilotCalendar.movingShadow.style.height);if($0V+$h>$04){$0V=$04-$h;};DayPilotCalendar.movingShadow.parentNode.style.display='none';DayPilotCalendar.movingShadow.style.top=$0V+'px';DayPilotCalendar.movingShadow.parentNode.style.display='';var $0W=$0b.clientWidth/$0b.rows[0].cells.length;var $m=Math.floor(($c.coords.x-45)/$0W);if($m<0){$m=0;};if($m<$0b.rows[0].cells.length&&$m>=0&&DayPilotCalendar.movingShadow.column!==$m){DayPilotCalendar.movingShadow.column=$m;DayPilotCalendar.moveShadow($0b.rows[0].cells[$m]);}}};$c.nav.scrollable.style.display='';};this.$1M=function($J,end){if(this.businessBeginsHour<this.businessEndsHour){return !($J.getHours()<this.businessBeginsHour||$J.getHours()>=this.businessEndsHour||$J.getDayOfWeek()===6||$J.getDayOfWeek()===0);};if($J.getHours()>=this.businessBeginsHour){return true;};if($J.getHours()<this.businessEndsHour){return true;};return false;};this.disposeHeader=function(){var $0x=this.nav.header;if($0x&&$0x.rows){for(var y=0;y<$0x.rows.length;y++){var r=$0x.rows[y];for(var x=0;x<r.cells.length;x++){var c=r.cells[x];c.onclick=null;c.onmousemove=null;c.onmouseout=null;}}};if(!this.fasterDispose)DayPilot.pu($0x);};this.drawHeaderRow=function($0y){var r=($0y)?this.nav.header.insertRow(-1):this.nav.header.rows[0];var $05=this.columns;var $0X=$05.length;for(var i=0;i<$0X;i++){var $p=$05[i];var $d=($0y)?r.insertCell(-1):r.cells[i];$d.data=$p;$d.style.overflow='hidden';$d.style.padding='0px';$d.style.border='0px none';$d.style.height=(this.headerHeight)+"px";var $X=($0y)?document.createElement("div"):$d.firstChild;if($0y){$X.unselectable='on';$X.style.MozUserSelect='none';$X.style.backgroundColor=$p.BackColor;$X.style.cursor='default';$X.style.position='relative';if(!this.cssOnly){$X.style.fontFamily=this.headerFontFamily;$X.style.fontSize=this.headerFontSize;$X.style.color=this.headerFontColor;if(i!==$0X-1){$X.style.borderRight="1px solid "+this.borderColor;}}else{$X.className=$c.$1J('_colheader');};$X.style.height=this.headerHeight+"px";var $0C=document.createElement("div");if(!this.cssOnly){$0C.style.position='absolute';$0C.style.left='0px';$0C.style.width='100%';$0C.style.padding="2px";$X.style.textAlign='center';}else{$0C.className=$c.$1J('_colheader_inner');};$0C.unselectable='on';$X.appendChild($0C);$d.appendChild($X);};var $0C=$X.firstChild;$0C.innerHTML=$p.InnerHTML;}};this.widthUnit=function(){if(this.width&&this.width.indexOf("px")!==-1){return "Pixel";};return "Percentage";};this.drawHeader=function(){var $0u=this.nav.header;var $0y=true;var $05=this.columns;var $0X=$05.length;if(this.headerCreated&&$0u&&$0u.rows&&$0u.rows.length>0){$0y=$0u.rows[$0u.rows.length-1].cells.length!==$0X;}while(this.headerCreated&&$0u&&$0u.rows&&$0u.rows.length>0&&$0y){if(!this.fasterDispose)DayPilot.pu($0u.rows[0]);$0u.deleteRow(0);};this.headerCreated=true;if(!$0y){var $0H=$c.nav.corner;if(!this.cssOnly){$0H.style.backgroundColor=$c.cornerBackColor;};if(!this.fasterDispose)DayPilot.pu($0H.firstChild);};this.drawHeaderRow($0y);};this.loadingStart=function(){if(this.loadingLabelVisible){this.nav.loading.innerHTML=this.loadingLabelText;this.nav.loading.style.top=(this.headerHeight+5)+"px";this.nav.loading.style.display='';}};this.commandCallBack=function($0Y,$p){var $F={};$F.command=$0Y;this.callBack2('Command',$p,$F);};this.loadingStop=function($0Z){if(this.callbackTimeout){window.clearTimeout(this.callbackTimeout);};this.nav.loading.style.display='none';};this.enableScrolling=function(){var $10=this.nav.scroll;var $11=(typeof this.$1N.scrollpos!=='undefined')?this.$1N.scrollpos:this.initScrollPos;if(!$11){return;};if($11==='Auto'){if(this.heightSpec==="BusinessHours"){$11=2*this.cellHeight*this.businessBeginsHour;}else{$11=0;}};$10.root=this;if($10.scrollTop===0){$10.scrollTop=$11;}};this.callbackError=function($t,$u){alert("Error!\r\nResult: "+$t+"\r\nContext:"+$u);};this.fixScrollHeader=function(){var w=DayPilot.sw(this.nav.scroll);var d=this.nav.cornerRight;if(d&&w>0){if(this.cssOnly){d.style.width=w+'px';}else{d.style.width=(w-3)+'px';}}};this.registerGlobalHandlers=function(){if(!DayPilotCalendar.globalHandlers){DayPilotCalendar.globalHandlers=true;DayPilot.re(document,'mouseup',DayPilotCalendar.gMouseUp);DayPilot.re(window,'unload',DayPilotCalendar.gUnload);}};this.events={};this.events.add=function(e){e.calendar=$c;if(!$c.events.list){$c.events.list=[];};$c.events.list.push(e.data);$c.update();$c.$1H.notify();};this.events.update=function(e){e.commit();$c.update();$c.$1H.notify();};this.events.remove=function(e){var $12=DayPilot.indexOf($c.events.list,e.data);$c.events.list.splice($12,1);$c.update();$c.$1H.notify();};this.update=function(){$c.$1O();$c.prepareVariables();$c.deleteEvents();var $13=true;if($13){$c.prepareColumns();$c.drawHeader();$c.drawMain();$c.drawHourTable();$c.updateHeight();};$c.loadEvents();$c.updateHeaderHeight();$c.$1F();$c.drawEvents();$c.clearSelection();if(this.visible){this.show();}else{this.hide();}};this.$1P=function(){if(this.id&&this.id.tagName){this.nav.top=this.id;}else if(typeof this.id==="string"){this.nav.top=document.getElementById(this.id);if(!this.nav.top){throw "DayPilot.Calendar: The placeholder element not found: '"+id+"'.";}}else{throw "DayPilot.Calendar() constructor requires the target element or its ID as a parameter";}};this.loadEvents=function(){var $0N=this.events.list;if(!$0N){return;};var length=$0N.length;var $14=24*60*60*1000;this.cache.pixels={};var $15=[];this.scrollLabels=[];this.minStart=10000;this.maxEnd=0;for(var i=0;i<length;i++){var e=$0N[i];e.start=new DayPilot.Date(e.start);e.end=new DayPilot.Date(e.end);};for(var i=0;i<this.columns.length;i++){var scroll={};scroll.minEnd=1000000;scroll.maxStart=-1;this.scrollLabels.push(scroll);var $0s=this.columns[i];$0s.events=[];$0s.lines=[];$0s.blocks=[];var $16=new DayPilot.Date($0s.Start);var $17=$16.getTime();var $18=$16.addTime($14);var $19=$18.getTime();for(var j=0;j<length;j++){if($15[j]){continue;};var e=$0N[j];var $J=e.start;var end=e.end;var $1a=$J.getTime();var $1b=end.getTime();if($1b<$1a){continue;};var $1c=!($1b<=$17||$1a>=$19);if($1c){var ep=new DayPilot.Event(e,$c);ep.part.dayIndex=i;ep.part.start=$17<$1a?e.start:$16;ep.part.end=$19>$1b?e.end:$18;var $1d=this.getPixels(ep.part.start,$0s.Start);var $1e=this.getPixels(ep.part.end,$0s.Start);var top=$1d.top;var $1f=$1e.top;if(top===$1f&&($1d.cut||$1e.cut)){continue;};var $1g=$1e.boxBottom;ep.part.top=Math.floor(top/this.cellHeight)*this.cellHeight+1;ep.part.height=Math.max(Math.ceil($1g/this.cellHeight)*this.cellHeight-ep.part.top,this.cellHeight-1)+1;ep.part.barTop=Math.max(top-ep.part.top-1,0);ep.part.barHeight=Math.max($1f-top-2,1);var $J=ep.part.top;var end=ep.part.top+ep.part.height;if($J>scroll.maxStart){scroll.maxStart=$J;};if(end<scroll.minEnd){scroll.minEnd=end;};if($J<this.minStart){this.minStart=$J;};if(end>this.maxEnd){this.maxEnd=end;};$0s.events.push(ep);if(ep.part.start.getTime()===$1a&&ep.part.end.getTime()===$1b){$15[j]=true;}}}};for(var i=0;i<this.columns.length;i++){var $0s=this.columns[i];$0s.events.sort(this.eventComparer);for(var j=0;j<$0s.events.length;j++){var e=$0s.events[j];$0s.putIntoBlock(e);};for(var j=0;j<$0s.blocks.length;j++){var $00=$0s.blocks[j];$00.events.sort(this.eventComparer);for(var k=0;k<$00.events.length;k++){var e=$00.events[k];$00.putIntoLine(e);}}}};this.eventComparer=function(a,b){if(!a||!b||!a.start||!b.start){return 0;};var $1h=a.start().getTime()-b.start().getTime();if($1h!==0){return $1h;};var $1i=b.end().getTime()-a.end().getTime();return $1i;};this.debug=function($0Z,$1j){if(!this.debuggingEnabled){return;};if(!$c.debugMessages){$c.debugMessages=[];};$c.debugMessages.push($0Z);if(typeof console!=='undefined'){console.log($0Z);}};this.getPixels=function($R,$J){if(!$J)$J=this.startDate;var $1a=$J.getTime();var $1k=$R.getTime();var $1l=this.cache.pixels[$1k+"_"+$1a];if($1l){return $1l;};$1a=$J.getTime();var $1m=30*60*1000;var $1n=$1k-$1a;var $1o=$1n%$1m;var $1p=$1n-$1o;var $1q=$1p+$1m;if($1o===0){$1q=$1p;};var $t={};$t.cut=false;$t.top=this.ticksToPixels($1n);$t.boxTop=this.ticksToPixels($1p);$t.boxBottom=this.ticksToPixels($1q);this.cache.pixels[$1k+"_"+$1a]=$t;return $t;};this.ticksToPixels=function($1k){return Math.floor((this.cellHeight*$1k)/(1000*60*30));};this.prepareVariables=function(){this.startDate=new DayPilot.Date(this.startDate);};this.updateHeaderHeight=function(){if(this.nav.corner){this.nav.corner.style.height=this.headerHeight+"px";}};this.updateHeight=function(){var sh=this.getScrollableHeight();if(this.nav.scroll&&sh>0){this.nav.scroll.style.height=sh+"px";}};this.$1H={};this.$1H.scope=null;this.$1H.notify=function(){if($c.$1H.scope){$c.$1H.scope["$apply"]();}};this.$1H.apply=function(f){if($c.angularAutoApply&&$c.$1H.scope){$c.$1H.scope["$apply"](f);}else{f();}};this.$1Q=function(){if(this.backendUrl||typeof WebForm_DoCallback==='function'){return(typeof $c.events.list==='undefined')||(!$c.events.list);}else{return false;}};this.$1F=function(){if(this.nav.top.style.visibility==='hidden'){this.nav.top.style.visibility='visible';}};this.show=function(){$c.visible=true;$c.nav.top.style.display='';};this.hide=function(){$c.visible=false;$c.nav.top.style.display='none';};this.$1R=function(){this.prepareVariables();this.prepareColumns();this.drawTop();this.drawHeader();this.drawMain();this.fixScrollHeader();this.enableScrolling();this.registerGlobalHandlers();DayPilotCalendar.register(this);this.callBack2('Init');};this.$1N={};this.$1S=function(){this.$1N.themes=[];this.$1N.themes.push(this.theme||this.cssClassPrefix);};this.$1T=function(){var $1r=this.$1N.themes;for(var i=0;i<$1r.length;i++){var $1s=$1r[i];DayPilot.Util.removeClass(this.nav.top,$1s+"_main");};this.$1N.themes=[];};this.$1U=function(){this.afterRender(null,false);if(typeof this.onAfterRender==="function"){var $C={};$C.isCallBack=false;this.onAfterRender($C);}};this.$1V=function(){if(typeof this.onInit==="function"&&!this.$1W){this.$1W=true;var $C={};this.onInit($C);}};this.$1O=function(){if(!$c.cssOnly){$c.cssOnly=true;window.console&&window.console.log&&window.console.log("DayPilot: cssOnly = false mode is not supported anymore.");}};this.init=function(){this.$1P();var $1t=this.$1Q();this.$1O();loadDefaultCss();this.$1S();if($1t){this.$1R();return;};this.prepareVariables();this.prepareColumns();this.loadEvents();this.drawTop();this.drawHeader();this.drawMain();this.$1F();this.fixScrollHeader();this.enableScrolling();this.registerGlobalHandlers();DayPilotCalendar.register(this);if(this.events){this.updateHeaderHeight();this.drawEvents();};this.$1U();this.$1V();this.initialized=true;};this.Init=this.init;};DayPilotCalendar.Cell=function($J,end,$m){this.start=$J;this.end=end;this.column=function(){};};DayPilotCalendar.Column=function($1u,name,$R){this.value=$1u;this.name=name;this.date=new DayPilot.Date($R);};DayPilot.Calendar=DayPilotCalendar.Calendar;if(typeof jQuery!=='undefined'){(function($){$.fn.daypilotCalendar=function($1v){var $1w=null;var j=this.each(function(){if(this.daypilot){return;};var $1x=new DayPilot.Calendar(this.id);this.daypilot=$1x;for(name in $1v){$1x[name]=$1v[name];};$1x.init();if(!$1w){$1w=$1x;}});if(this.length===1){return $1w;}else{return j;}};})(jQuery);};(function registerAngularModule(){var $1y=DayPilot.am();if(!$1y){return;};$1y.directive("daypilotCalendar",function(){return{"restrict":"E","template":"<div></div>","replace":true,"link":function($1z,element,$1A){var $c=new DayPilot.Calendar(element[0]);$c.$1H.scope=$1z;$c.init();var $1B=$1A["id"];if($1B){$1z[$1B]=$c;};var $1C=$1z["$watch"];$1C.call($1z,$1A["daypilotConfig"],function($1u){for(var name in $1u){$c[name]=$1u[name];};$c.update();$c.$1V();},true);$1C.call($1z,$1A["daypilotEvents"],function($1u){$c.events.list=$1u;$c.update();},true);}};});})();})();


